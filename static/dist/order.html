<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
      <meta name="description" content="" />
      <meta name="author" content="" />
      <title>Submit Order</title>
      <link href="css/styles.css" rel="stylesheet" />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js" crossorigin="anonymous"></script>
   </head>
   <style>
inline6 {
   display : inline-block; 
}

   </style>
   <body class="bg-primary">
      <div id="layoutAuthentication">
         <div id="layoutAuthentication_content">
            <main>
               <div class="container">
                  <div class="row justify-content-center">
                     <div class="col-lg-7">
                        <div class="card shadow-lg border-0 rounded-lg mt-5">
                           <div class="card-header"><h3 class="text-center font-weight-light my-4">Submit an Order</h3></div>
                           <div class="card-header"><h6 class="text-center font-weight-light my-4">After your order is recieved, we will follow up in Email/WhatsApp/Telegram
                              </h6></div>
                              <div class="card-body">
                                 <form>
                                    <div class="form-row">
                                       <div class="col-md-6">
                                          <div class="form-group">
                                             <label class="small mb-1" for="inputFirstName">Name</label>
                                             <input id="firstName"class="form-control py-4" id="inputFirstName" type="text" placeholder="Enter your name" />
                                          </div>
                                       </div>
                                    </div>
                                    <div class="form-group">
                                       <label class="small mb-1" for="inputEmailAddress">Contact</label>
                                       <input id="emailOrNumber"class="form-control py-4" id="inputEmailAddress" type="email" aria-describedby="emailHelp" placeholder="Enter email address or WhatsApp/Telegram number" />
                                    </div>
                                    <div class="form-group">
                                       <label class="small mb-1" for="inputEmailAddress">School website (Optional)</label>
                                       <input id="madrasah" class="form-control py-4" id="inputEmailAddress" type="email" aria-describedby="emailHelp" placeholder="Link to school website..." />
                                    </div>
                                    <div class="inline6">
                                       <label class="small mb-1" for="pdf upload">Upload PDF</label>
                                       <input type="file" id="fileUpload" />
                                    </div>
                                    <div id ="submitButton" class="form-group mt-4 mb-0"><a class="btn btn-primary btn-block" href="order.html">Submit</a></div>
                                    <script 
                                       type="text/javascript">

                                       document.querySelector('#fileUpload').addEventListener('change', event => {
                                          alert("hello")
                                          const files = event.target.files
                                          const formdata = new FormData()
                                          const name = document.getElementById("firstName").value
                                          const emailornumber = document.getElementById("emailOrNumber").value
                                          const madrasah = document.getElementById("madrasah").value

                                          formdata.append('myFile', files[0])

                                          if (!name || !emailornumber || !madrasah){
                                             return
                                          }

                                          const orderdata = {
                                             "name" : name,
                                             "contact" : emailornumber,
                                             "madrasah" : madrasah
                                          }

                                          fetch('http://f18328460544.ngrok.io/upload', {
                                             method: 'post',
                                             body: {
                                                formdata,
                                                orderdata
                                             }
                                          })
                                             .then(response => response.json())
                                             .then(data => {
                                                console.log(data.path)
                                             })
                                             .catch(error => {
                                                console.error(error)
                                             })
                                       })

                                    </script>
                                 </form>
                              </div>
                        </div>
                     </div>
                  </div>
               </div>
            </main>
         </div>
         <div id="layoutAuthentication_footer">
            <footer class="py-4 bg-light mt-auto">
               <div class="container-fluid">
                  <div class="d-flex align-items-center justify-content-between small">
                     <div class="text-muted">Copyright &copy; scanpdf.app 2021</div>
                     <div>
                        <a href="#">Terms &amp; Conditions</a>
                     </div>
                  </div>
               </div>
            </footer>
         </div>
      </div>

      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
      <script src="js/scripts.js"></script>
   </body>
</html>
